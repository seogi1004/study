<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<link href="../dist/jui.min.css" rel="stylesheet" />
<link href="../dist/jennifer.theme.min.css" rel="stylesheet" />
<script src="../lib/jquery-1.8.0.min.js"></script>
<script src="../dist/jui.min.js"></script>
<script src="../xy_tpl/util.js"></script>

<style>
    .input {
        margin-right: 20px !important;
    }
    .group {
        margin-right: 5px !important;
    }
    .head {
        height: 35px !important;
    }
</style>
<script>
var timer = null;

jui.define("chart.brush.missile3d", [], function() {
    var Missible3DBrush = function() {
        this.draw = function() {
            var g = this.chart.svg.group();

            this.eachData(function(i, data) {
                var x = this.axis.x(data[0]),
                    y = this.axis.y(data[1]);

                var c = this.chart.svg.circle({
                    fill: this.color(0),
                    r: this.brush.r,
                    cx: x,
                    cy: y
                });

                g.append(c);
            });

            return g;
        }
    }

    Missible3DBrush.setup = function() {
        return {
            r: 1,
            clip: true
        }
    }

    return Missible3DBrush;
}, "chart.brush.core");

jui.ready([ "chart.builder", "util.transform", "util.math" ], function(builder, Transform, Math2) {
    var domain = [ -50, 50 ];

    var chart = builder("#result", {
        width: 750,
        height: 750,
        theme: "dark",
        axis: [{
            x: {
                type: "range",
                domain: domain,
                step: 10,
                line: true
            },
            y: {
                type: "range",
                domain: domain,
                step: 10,
                line: true
            },
            data: getData(1, 10)
        }],
        brush: [{
            type: "missile3d"
        }],
        style: {
            gridXAxisBorderWidth: 1,
            gridYAxisBorderWidth: 1,
            gridTickBorderSize: 0
        }
    });
});

function getData(startX, distance) {
    var data = [];

    function calculate(x) {
        var a = -startX,
            b = -(startX + distance);

        return (x * x) + (x * b) + (a * x) + (a * b);
    }

    for(var i = startX; i < startX + distance; i+=0.1) {
        data.push([ i, calculate(i) ]);
    }

    return data;
}
</script>
</head>

<body class="jui">

<div class="panel">
    <div class="head">
    </div>
    <div class="body fit">
        <div id="result"></div>
    </div>
</div>

</body>
</html>