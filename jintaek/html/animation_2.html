<!DOCTYPE html>
<html>
<head lang="ko">
    <meta charset="UTF-8" />
    <title>SVG - Viewport</title>
    <link rel="stylesheet" href="../css/base.css"/>
    <link rel="stylesheet" href="../css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../css/common.css"/>
    <link rel="stylesheet" href="../css/prettify.css" />
    <script src="../js/lib/jquery-1.11.0.min.js"></script>
    <script src="../js/lib/prettify.js"></script>
    <script src="../js/common.js"></script>
    <style>
        .line {fill:none; stroke-width: 1.5;  stroke: #000;}
    </style>
</head>

<body>

<header id="header">
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">SVG</a>
            </div>
            <!--<div id="navbar" class="collapse navbar-collapse">-->
                <!--<ul class="nav navbar-nav">-->
                    <!--<li class="active"><a href="#">Home</a></li>-->
                    <!--<li><a href="#about">About</a></li>-->
                    <!--<li><a href="#contact">Contact</a></li>-->
                <!--</ul>-->
            <!--</div>-->
        </div>
    </nav>
</header>


<div class="container">

    <div class="page-header">
        <h2>Animation - simple javascript</h2>
    </div>

    <p>
        기본적인 스크립트를 이용한 애니메이션 예제이다.<br/>
        실질적으로 SMIL을 이용 실무 사례는 거의 없어 찾아보기 힘들었고 일반적으로 많이 쓰이는 차트의 경우는 속성값을 제어하는 방법을 가장 많이 사용한다.<br/>
        d3나 raphael을 이용하면 좀더 쉽게 접근할 수 있고 이를 이용하여 개발한 경우가 많았다.
    </p>

    <section class="section">

        <h3>Example</h3>

        <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading">basic script</div>
            <div class="panel-body">
                <div style="margin-bottom:20px">
                    <button class="btn btn-default" onclick="doAnim()">do animation</button>
                    <button class="btn btn-default" onclick="resetAnim()">reset animation</button>
                </div>
                <svg width="800px" height="200px" viewBox="0 0 800 200">
                    <rect id="mySquare" x="0" y="0" width="20" height="100" style=" fill: orange;" />
                </svg>
                <script>
                    "use strict";
                    var setHeight = 200;
                    var theSquare = document.getElementById("mySquare");
                    var requestAnimationFrameID;

                    theSquare.getWidth = parseInt(theSquare.getAttribute('width'));

                    function doAnim() {
                        if (theSquare.getWidth == setHeight) {
                            cancelAnimationFrame(requestAnimationFrameID);
                            return;
                        }
                        theSquare.setAttribute("width", theSquare.getWidth);
                        theSquare.getWidth += 1;
                        requestAnimationFrameID = requestAnimationFrame(doAnim);
                    }

                    function resetAnim() {
                        cancelAnimationFrame(requestAnimationFrameID);
                        theSquare.setAttribute("width", 20);
                        theSquare.getWidth = parseInt(theSquare.getAttribute('width'));
                    }
                </script>

            </div>

        </div>

    </section>


    <!-- html -->
    <section class="section">
        <pre class="prettyprint">
         //html
        <svg width="800px" height="200px" viewBox="0 0 800 200">
            <rect id="mySquare" x="0" y="0" width="20" height="100" style=" fill: orange;" />
        </svg>
        //script
        <script>
            "use strict";
            var setHeight = 200;
            var theSquare = document.getElementById("mySquare");
            var requestAnimationFrameID;

            theSquare.getWidth = parseInt(theSquare.getAttribute('width'));

            function doAnim() {
                if (theSquare.getWidth == setHeight) {
                    cancelAnimationFrame(requestAnimationFrameID);
                    return;
                }
                theSquare.setAttribute("width", theSquare.getWidth);
                theSquare.getWidth += 1;
                requestAnimationFrameID = requestAnimationFrame(doAnim);
            }

            function resetAnim() {
                cancelAnimationFrame(requestAnimationFrameID);
                theSquare.setAttribute("width", 20);
                theSquare.getWidth = parseInt(theSquare.getAttribute('width'));
            }
        </script>
        </pre>
    </section>


</div>




</body>
</html>